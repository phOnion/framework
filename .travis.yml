language: php
before_script:
  - echo 'zend.assertions=1' >> ~/.phpenv/versions/$(phpenv version-name)/etc/conf.d/travis.ini
  - echo 'assert.exception=1' >> ~/.phpenv/versions/$(phpenv version-name)/etc/conf.d/travis.ini
php:
  - '7.2'
  - '7.3'
install: composer install -o --no-interaction --prefer-dist
script:
    - vendor/bin/phpunit --bootstrap vendor/autoload.php --coverage-clover=coverage.xml
    - vendor/bin/phpcs src/ --standard=psr2
after_success:
    - php vendor/bin/codacycoverage clover coverage.xml
notifications:
  webhooks:
    urls:
      - https://webhooks.gitter.im/e/4f60dced13461defff59
    on_success: change  # options: [always|never|change] default: always
    on_failure: always  # options: [always|never|change] default: always
    on_start: never     # options: [always|never|change] default: always
